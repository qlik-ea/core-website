
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.languages" content="">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      
        <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.12.1">
    
    
      
        <title>License Service - Frontira</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-04ea671600.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Frontira" class="md-header-nav__button md-logo">
          
            <i class="md-icon md-icon--home"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Documentation
                </span>
              
                <span class="md-header-nav__parent">
                  Services
                </span>
              
            
            License Service
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon md-icon--home"></i>
      
    </span>
    Frontira
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/download/" title="Download" class="md-nav__link">
      Download
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1" checked>
    
    <label class="md-nav__link" for="nav-3-1">
      Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../qix-engine/" title="QIX Engine" class="md-nav__link">
      QIX Engine
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        License Service
      </label>
    
    <a href="./" title="License Service" class="md-nav__link md-nav__link--active">
      License Service
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#distribution" title="Distribution" class="md-nav__link">
    Distribution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#license-service_1" title="License Service" class="md-nav__link">
    License Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qix-engine" title="QIX Engine" class="md-nav__link">
    QIX Engine
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment" title="Deployment" class="md-nav__link">
    Deployment
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-instance" title="Single Instance" class="md-nav__link">
    Single Instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lef-back-end-connectivity" title="LEF back-end connectivity" class="md-nav__link">
    LEF back-end connectivity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring" title="Monitoring" class="md-nav__link">
    Monitoring
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#health-check" title="Health Check" class="md-nav__link">
    Health Check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" title="Metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" title="Logging" class="md-nav__link">
    Logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mira/" title="Mira" class="md-nav__link">
      Mira
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../contract/" title="Contract" class="md-nav__link">
      Contract
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Recipes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-3">
        Recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/authorization/" title="Authorization" class="md-nav__link">
      Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/core/" title="Core" class="md-nav__link">
      Core
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/data-loading/" title="Data Loading" class="md-nav__link">
      Data Loading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/document-distribution/" title="Document Distribution" class="md-nav__link">
      Document Distribution
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../recipes/monitoring-and-scaling/" title="Monitoring and Scaling" class="md-nav__link">
      Monitoring and Scaling
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apis/" title="APIs" class="md-nav__link">
      APIs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Use Cases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Use Cases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../use-cases/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../use-cases/use-case-custom-analytics/README/" title="Custom Analytics UI" class="md-nav__link">
      Custom Analytics UI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../terminology/" title="Terminology" class="md-nav__link">
      Terminology
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Support & Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Support & Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../support-and-services/licensing/" title="Licensing" class="md-nav__link">
      Licensing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../support-and-services/sales/" title="Sales" class="md-nav__link">
      Sales
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../support-and-services/tech-support/" title="Technical Support" class="md-nav__link">
      Technical Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../support-and-services/training/" title="Training" class="md-nav__link">
      Training
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../pricing/" title="Pricing" class="md-nav__link">
      Pricing
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#distribution" title="Distribution" class="md-nav__link">
    Distribution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#license-service_1" title="License Service" class="md-nav__link">
    License Service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qix-engine" title="QIX Engine" class="md-nav__link">
    QIX Engine
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment" title="Deployment" class="md-nav__link">
    Deployment
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-instance" title="Single Instance" class="md-nav__link">
    Single Instance
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lef-back-end-connectivity" title="LEF back-end connectivity" class="md-nav__link">
    LEF back-end connectivity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring" title="Monitoring" class="md-nav__link">
    Monitoring
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#health-check" title="Health Check" class="md-nav__link">
    Health Check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics" title="Metrics" class="md-nav__link">
    Metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" title="Logging" class="md-nav__link">
    Logging
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="license-service">License Service</h1>
<p>The <em>License Service</em> is required to run QIX Engine with a valid license.</p>
<p>The License Service shall be configured and deployed together with the QIX Engine. In a deployment, each QIX Engine unlocks itself by checking for a valid license, both at start up and periodically, using the License Service.</p>
<p>As such, the License Service API is not primarily intended to be consumed by applications built on top of Frontira. The License Service only works as a required side-car service to QIX Engine.</p>
<h2 id="distribution">Distribution</h2>
<p>The License Service is distributed as a Docker image and is available on Docker Hub as <a href="https://hub.docker.com/r/qlikea/license-service">qlikea/license-service</a>.</p>
<p>The License Service is developed by Qlik as closed source.</p>
<h2 id="configuration">Configuration</h2>
<h3 id="license-service_1">License Service</h3>
<p>The License Service shall be configured with information on the license to use with the deployment of QIX Engine. This is done by providing two environment variables to the License Service:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>LEF_SERIAL</td>
<td>The LEF serial number which identifies the license to use.</td>
</tr>
<tr>
<td>LEF_CONTROL</td>
<td>A control number used to validate the LEF serial number.</td>
</tr>
</tbody>
</table>
<p>If these environment variables are not provided, or contain incorrect values, the License Service will still start, but it will deny all activation request with error status codes.</p>
<p>The information can also be provided in files by instead using the envionment variables</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>LEF_SERIAL_FILE</td>
<td>Path to file containing the LEF serial number.</td>
</tr>
<tr>
<td>LEF_CONTROL_FILE</td>
<td>Path to file containing the control number used to validate the LEF serial number.</td>
</tr>
</tbody>
</table>
<p>This can be useful, for example when providing the values using Docker secrets in Docker Swarm.</p>
<h3 id="qix-engine">QIX Engine</h3>
<p>The QIX Engine must also be configured with the URL of the License Service in order to make license activation requests to it. this is done by providing the following command line argument to QIX Engine:</p>
<pre><code class="sh">-S LicenseServiceURL=&lt;License Service URL&gt;
</code></pre>

<h2 id="examples">Examples</h2>
<p>For running examples of basic license configuration, see the <a href="../../../recipes/core/">Core Recipe</a>.</p>
<h2 id="deployment">Deployment</h2>
<h3 id="single-instance">Single Instance</h3>
<p>Normally, only one License Service instance should be required in a Frontira deployment. Traffic between QIX Engine instances and the License Service is low. For load balancing or availability concerns, running multiple replicas of the License Service is supported.</p>
<h3 id="lef-back-end-connectivity">LEF back-end connectivity</h3>
<p>When deployed, the License Service must have access to the Qlik licensing back-end, which means it needs to be able to access the following external URLs:</p>
<ul>
<li><code>http://lef1.qliktech.com</code></li>
<li><code>http://lef2.qliktech.com</code></li>
<li><code>http://lef3.qliktech.com</code></li>
</ul>
<p>The hosting environment may need to open access to these locations, otherwise activation requests will fail.</p>
<h3 id="monitoring">Monitoring</h3>
<h4 id="health-check">Health Check</h4>
<p>The License Service exposes <code>/v1/health</code> on port 9200, for health checking. Always responds with <code>200 OK</code>.</p>
<h4 id="metrics">Metrics</h4>
<p>The License Service exposes <code>/v1/metrics</code> on port 9200, for Prometheus metrics scraping. The following metrics are provided.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>http_requests_total</td>
<td>COUNTER</td>
<td>Total number of HTTP requests since service start.<br>- Includes both successful and unsuccessful requests<br>- HTTP method and endpoint path are provided as labels</td>
</tr>
<tr>
<td>http_request_failures_total</td>
<td>COUNTER</td>
<td>Total number of HTTP request failures since service start.<br>- HTTP method and endpoint path are provided as labels</td>
</tr>
<tr>
<td>http_request_duration_seconds</td>
<td>HISTOGRAM</td>
<td>Durations of HTTP request since service start.<br>- HTTP method and endpoint path are provided as labels.</td>
</tr>
<tr>
<td>active_instances</td>
<td>GAUGE</td>
<td>Number of active instances (Engines with an active license).</td>
</tr>
<tr>
<td>license_expiry_seconds</td>
<td>GAUGE</td>
<td>Number of seconds until the license expires.</td>
</tr>
</tbody>
</table>
<h4 id="logging">Logging</h4>
<p>The License Service complies with logging as described in the Frontira <a href="../../contract/">Contract</a>. By default, the minimum log level is <code>info</code>. However, for the Microsoft libraries the default minimum logging level is set to <code>warning</code> to avoid too verbose logging.</p>
<p>The default minimum logging level can be overridden by providing the <code>LOG_LEVEL</code> environment variable.</p>
<p>If provided, this will affect the logging level for all components in the License Service, including Microsoft libraries. It is recommended to use the default minimum level in a production environment, and only override the level for debugging purposes.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../qix-engine/" title="QIX Engine" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                QIX Engine
              </span>
            </div>
          </a>
        
        
          <a href="../mira/" title="Mira" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Mira
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-946997f430.js"></script>
      
      
      <script>app.initialize({version:"0.16.3",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>